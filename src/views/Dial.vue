<template>
  <div class="m-ui-dial">
    <div id="js_pointer" class="pointer">
      <a class="btn" href="javascript:;" @click="()=>this.lottery.draw()"></a>
    </div>
  </div>
</template>

<script>
//å¤§è½¬ç›˜
import LotteryDial from "../util/dial.js";
import {sendNotice} from "../util/notice.js";
export default {
  name: "Dial",
  data() {
    return {
      lottery: undefined,
      count: 1,
      gift: ['ç¬”è®°æœ¬ğŸ““','è°¢è°¢æƒ é¡¾ğŸ˜¯','SONYç´¢å°¼ ZV-E10','è°¢è°¢æƒ é¡¾ğŸ™‚','ThinkPadè”æƒ³ç¬”è®°æœ¬','è°¢è°¢æƒ é¡¾ğŸ˜…','iPhone16 Pro Max','è°¢è°¢æƒ é¡¾iğŸ˜«']
    }
  },
  mounted() {
    this.lottery = new LotteryDial(document.getElementById('js_pointer'), { // eslint-disable-line
      speed: 30, // æ¯å¸§é€Ÿåº¦
      areaNumber: 8 // å¥–åŒºæ•°é‡
    })
    var index = -1
    this.lottery.on('start', ()=> {
      // è¯·æ±‚è·å–ä¸­å¥–ç»“æœ
      index = Math.round(Math.random() * 7)
      this.lottery.setResult(index)
//    // å‡å¦‚è¯·æ±‚å‡ºé”™
//    setTimeout(function () {
//      lottery.reset()
//    }, 1000)
    })
    this.lottery.on('end',  ()=> {
      sendNotice(`æ­å–œæ‚¨æŠ½ä¸­äº†ï¼š${this.gift[index]}`)
      alert(`æ­å–œæ‚¨æŠ½ä¸­äº†ï¼š${this.gift[index]}`)
    })
  }
}
</script>



<style scoped>

</style>